<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gp Bootstrap Template</title>

  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link href="css/animate.min.css" rel="stylesheet">
  <link href="css/prettyPhoto.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="css/responsive.css" rel="stylesheet">
  <!-- =======================================================
    Theme Name: Gp
    Theme URL: https://bootstrapmade.com/gp-free-multipurpose-html-bootstrap-templat/
    Author: BootstrapMade
    Author URL: https://bootstrapmade.com
  ======================================================= -->

</head>

<body class="homepage" onload="obj.geteq()">
  <header id="header">
    <nav class="navbar navbar-fixed-top" role="banner">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
          <a class="navbar-brand" href="index.html">Gp.</a>
        </div>

        <div class="collapse navbar-collapse navbar-right">
          <ul class="nav navbar-nav">
            <li><a href="home.html">Home</a></li>
            <li><a href="about-us.html">About Us</a></li>
            <li><a href="vr_walkthrough.html">Close Packing in solids</a></li>
            <li class="active"><a href="balance.html">Balancing Equations</a></li>
            <li><a href="blog.html">Periodic Table</a></li>
            <li><a href="contact-us.html">Contact</a></li>
          </ul>
        </div>
      </div>
      <!--/.container-->
    </nav>
    <!--/nav-->

  </header>
  <!--/header-->

  <section id="portfolio">
    <div class="container">
	<canvas id="myCanvas" width="1200" height="1000" style="border:1px solid #000000;">
		       

	</canvas> 
         
    </div>
    </br>
    <div class="container">
    	<div class="center">
    		<span id="equation" style="font-size:50px; font-style:bold; "></span>
    	</div>
    </div>
  </section>
  <!--/#portfolio-item-->

  <section id="bottom">
    <div class="container wow fadeInDown" data-wow-duration="1000ms" data-wow-delay="600ms">
      <div class="row">
        <div class="col-md-3 col-sm-6">
          <div class="widget">
            <h3>Company</h3>
            <ul>
              <li><a href="#">About us</a></li>
              <li><a href="#">We are hiring</a></li>
              <li><a href="#">Meet the team</a></li>
              <li><a href="#">Copyright</a></li>
            </ul>
          </div>
        </div>
        <!--/.col-md-3-->

        <div class="col-md-3 col-sm-6">
          <div class="widget">
            <h3>Support</h3>
            <ul>
              <li><a href="#">Faq</a></li>
              <li><a href="#">Blog</a></li>
              <li><a href="#">Forum</a></li>
              <li><a href="#">Documentation</a></li>
            </ul>
          </div>
        </div>
        <!--/.col-md-3-->

        <div class="col-md-3 col-sm-6">
          <div class="widget">
            <h3>Developers</h3>
            <ul>
              <li><a href="#">Web Development</a></li>
              <li><a href="#">SEO Marketing</a></li>
              <li><a href="#">Theme</a></li>
              <li><a href="#">Development</a></li>
            </ul>
          </div>
        </div>
        <!--/.col-md-3-->

        <div class="col-md-3 col-sm-6">
          <div class="widget">
            <h3>Our Partners</h3>
            <ul>
              <li><a href="#">Adipisicing Elit</a></li>
              <li><a href="#">Eiusmod</a></li>
              <li><a href="#">Tempor</a></li>
              <li><a href="#">Veniam</a></li>
            </ul>
          </div>
        </div>
        <!--/.col-md-3-->
      </div>
    </div>
  </section>
  <!--/#bottom-->

  <div class="top-bar">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="social">
            <ul class="social-share">
              <li><a href="#"><i class="fa fa-facebook"></i></a></li>
              <li><a href="#"><i class="fa fa-twitter"></i></a></li>
              <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
              <li><a href="#"><i class="fa fa-dribbble"></i></a></li>
              <li><a href="#"><i class="fa fa-skype"></i></a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!--/.container-->
  </div>
  <!--/.top-bar-->

  <footer id="footer" class="midnight-blue">
    <div class="container">
      <div class="row">
        <div class="col-sm-6">
          &copy; Gp Theme. All Rights Reserved.
          <div class="credits">
            <!--
              All the links in the footer should remain intact.
              You can delete the links only if you purchased the pro version.
              Licensing information: https://bootstrapmade.com/license/
              Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Gp
            -->
            Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
          </div>
        </div>
        <div class="col-sm-6">
          <ul class="pull-right">
            <li><a href="#">Home</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Faq</a></li>
            <li><a href="#">Contact Us</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>
  <!--/#footer-->

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.prettyPhoto.js"></script>
  <script src="js/jquery.isotope.min.js"></script>
  <script src="js/wow.min.js"></script>
  <script src="js/main.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<script>
		
		var c = document.getElementById("myCanvas");
		var ctx = c.getContext("2d");
		var eqnum=1;
		var side=0;
		var level="easy";
		obj=
			{
				xhr: new XMLHttpRequest(),

				showbal: function()
				{
					if(obj.xhr.readyState == 4 && obj.xhr.status== 200)
					{
						//alert(this.responseXML.documentElement.childNodes[1].childNodes[1].nodeName);
						/*root = this.responseXML.documentElement;
			
						node = root.getElementsByTagName("name")[1];
						alert(node.firstChild.nodeValue);
			
						obj.xhr.abort();*/
			
						myobj = obj.xhr.responseText;
						console.log(myobj);
						side=myobj-0;
						console.log(side);
						unbalance();
						//alert(myobj);
						
					}
				},

				getbal: function()
				{
					
					obj.xhr.onreadystatechange = obj.showbal;
					lhs=document.getElementsByClassName("LHScoefficients");
					url="getmsg.php?";
					for(i=0; i<lhs.length; i++)
					{
						if(i==0)
						{
							url+="lhs["+i+"]="+lhs[i].value;
						}
						else
						{
							url+="&lhs["+i+"]="+lhs[i].value;
						}
						
					}
					rhs=document.getElementsByClassName("RHScoefficients");
					
					for(i=0; i<rhs.length; i++)
					{
						url+="&rhs["+i+"]="+rhs[i].value;
					}
					url+="&eqnum="+eqnum;
					console.log(url);
					obj.xhr.open("GET", url, true);
	
					obj.xhr.send();
					
				},
				
				showeq: function()
				{
					if(obj.xhr.readyState == 4 && obj.xhr.status== 200)
					{
						
						myobj = JSON.parse(obj.xhr.responseText);
						eqnum=myobj.eqnum;
						clear_equation();
						read_equation(myobj.equation);
						//alert(myobj);
						
					}
				},

				geteq: function()
				{
					
					obj.xhr.onreadystatechange = obj.showeq;
			
					obj.xhr.open("GET", "retr_eqts.php?level="+level, true);
	
					obj.xhr.send();
					
				}


			};

		function read_equation(str)
		{	
			eqt=format(str);
			display_equation(eqt);
		}
		
		function get_next(level){
			probs={easy:[0.2,0.6,1], medium: [0.1,0.6,1], hard:[0.1,0.4,1]};
			levels=["easy","medium","hard"];
			r= Math.random()
			for(i=0; i<3; i++)
				if(r<= probs[level][i])
					{ level=levels[i];
					  //retrieve next
					 //obj.xhr2= new XMLHTTPRequest();
					 //obj.xhr.open("GET", "getmsg.php?level="+obj.level, true);
					  obj.geteq();
					  break;
					}
					
		}
		function draw_images()
		{
			ctx.beginPath();
			ctx.fillRect(200, 800, 800, 150);
			ctx.fillStyle="grey";
			ctx.fillRect(550, 150, 100, 650);
			ctx.stroke();
			balx=100;
			baly=175;
			ctx.beginPath();
			ctx.fillRect(balx, baly, 1000, 50);
			ctx.closePath();
			ctx.stroke();
			beam1 = c.getContext("2d");
			x1=150;
			y1=600;
			beam1.beginPath();
			beam1.fillStyle="red";
			beam1.fillRect(x1, y1, 200, 50);
			beam1.closePath();
			beam1.stroke();
			beam2 = c.getContext("2d");
			x2=850;
			y2=600;
			beam2.beginPath();
			beam2.fillRect(x2, y2, 200, 50);
			beam2.closePath();
			beam2.stroke();
		}
		draw_images();
		//window.addEventListener("click", unbalance,true);
		var angle=0;
		function unbalance()
		{
			
			if(side==0)
			{
				if(y1 < 700)
				{
					beam1.clearRect(x1, y1, 200, 50);
					beam2.clearRect(x2, y2, 200, 50);
					y1+=5;
					y2-=5;
					beam1.fillRect(x1, y1, 200, 50);
					beam2.fillRect(x2, y2, 200, 50);
				}
				else
				{
					return;
				}
			}
			else if(side==1)
			{
				if(y2 < 700)
				{
					beam1.clearRect(x1, y1, 200, 50);
					beam2.clearRect(x2, y2, 200, 50);
					y2+=5;
					y1-=5;
					beam1.fillRect(x1, y1, 200, 50);
					beam2.fillRect(x2, y2, 200, 50);
				}
				else
				{
					return;
				}
			}
			else
			{
				if(y1 > 600)
				{
					beam1.clearRect(x1, y1, 200, 50);
					beam2.clearRect(x2, y2, 200, 50);
					y2+=5;
					y1-=5;
					beam1.fillRect(x1, y1, 200, 50);
					beam2.fillRect(x2, y2, 200, 50);
				}
				else if(y1 <600)
				{
					beam1.clearRect(x1, y1, 200, 50);
					beam2.clearRect(x2, y2, 200, 50);
					y1+=5;
					y2-=5;
					beam1.fillRect(x1, y1, 200, 50);
					beam2.fillRect(x2, y2, 200, 50);
				}
				else if(side==3)
				{
					but=document.createElement("input");
					but.type="button"
					but.value="Next";
					but.onclick=get_next(level);
					equation=document.getElementById("equation");
					equation.appendChild(but);
					return;
				}
			}
			
			setTimeout(unbalance, 50);
		}
		//read_equation("Mg(ClO3)2 = MgCl2 + O2", "medium");
		function format(eqt)
		{
			eqt=eqt.split("=");
			LHS=eqt[0].split("+");
			RHS=eqt[1].split("+");
			return [LHS, RHS];
		}
		
		function clear_equation()
		{
			equation=document.getElementById("equation");
			equation.innerHTML="";
		}

		function display_equation(eqt)
		{
			equation=document.getElementById("equation");
			console.log(eqt[0], eqt[0].length);
			for(i=0; i<eqt[0].length; i++)
			{
				if(i>0)
				{
					sp=document.createElement("span");
					sp.innerHTML=" + ";
					equation.appendChild(sp);
				}
				inp=document.createElement("input");
				inp.type="text";
				inp.style.width="50px";
				inp.value="1";
				inp.onblur=obj.getbal;
				inp.className="LHScoefficients";
				equation.appendChild(inp);
				sp=document.createElement("span");
				sp.innerHTML=eqt[0][i];
				equation.appendChild(sp);
			}
			sp=document.createElement("span");
			sp.innerHTML="---->";
			equation.appendChild(sp);
			for(i=0; i<eqt[1].length; i++)
			{
				if(i>0)
				{
					sp=document.createElement("span");
					sp.innerHTML=" + ";
					equation.appendChild(sp);
				}
				inp=document.createElement("input");
				inp.type="text";
				inp.style.width="50px";
				inp.value="1";
				inp.onblur=obj.getbal;
				inp.className="RHScoefficients";
				equation.appendChild(inp);
				sp=document.createElement("span");
				sp.innerHTML=eqt[1][i];
				equation.appendChild(sp);
			}
		}

		
		
		
	</script>
</body>



</html>
